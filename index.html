<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DDNetwork One — Premium Web Systems</title>
    <meta name="description" content="DDNetwork One designs premium websites, portals, and AI‑assisted experiences for modern businesses.">
    <meta name="theme-color" content="#0b0f14">
    
    <link rel="icon" type="image/png" href="https://raw.githubusercontent.com/ddnetwork-one/ddnetwork-store/refs/heads/main/crop_ddnlogo.png">

    <!-- Fonts: Sora (display) + Manrope (body) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@300;400;500;600;700&family=Sora:wght@500;600;700&display=swap" rel="stylesheet">

    <!-- Icons: RemixIcon -->
    <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">

    <!-- RAZORPAY CHECKOUT SCRIPT -->
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>

    <style>
        /* --- CSS VARIABLES (NEW DARK THEME BASE) --- */
        :root {
            --bg: #0b0f14;
            --bg-soft: #0f141b;
            --panel: rgba(255, 255, 255, 0.04);
            --panel-2: rgba(255, 255, 255, 0.06);
            --border: rgba(255, 255, 255, 0.08);
            --text: #e9eef5;
            --muted: #9fb0c4;

            --brand: #76f7d2;
            --brand-2: #8ab4ff;
            --brand-3: #ffd37c;

            --danger: #ff6b6b;
            --success: #10b981;
            --warning: #f59e0b;
            --shadow: 0 20px 60px rgba(0,0,0,0.4);

            --font-display: "Sora", sans-serif;
            --font-body: "Manrope", sans-serif;

            --radius: 18px;
            --radius-lg: 28px;
            --ease: cubic-bezier(.16,1,.3,1);
            --header-h: 72px;
        }

        /* Light Theme Toggle */
        body.theme-light {
            --bg: #f5f7fb;
            --bg-soft: #ffffff;
            --panel: rgba(255,255,255,0.75);
            --panel-2: rgba(255,255,255,0.9);
            --border: rgba(15, 23, 42, 0.08);
            --text: #0b1220;
            --muted: #5f6c82;
            --brand: #0ea5e9;
            --brand-2: #6366f1;
            --brand-3: #f59e0b;
            --shadow: 0 20px 60px rgba(15, 23, 42, 0.12);
        }

        /* --- RESET & BASE --- */
        * { box-sizing: border-box; margin: 0; padding: 0; }
        html { scroll-behavior: smooth; }
        body {
            background: var(--bg);
            color: var(--text);
            font-family: var(--font-body);
            line-height: 1.6;
            min-height: 100vh;
            overflow-x: hidden;
        }
        a { color: inherit; text-decoration: none; }
        img { display: block; max-width: 100%; }
        button, input, select, textarea { font-family: inherit; }
        
        /* Utilities */
        .container { width: min(1200px, 92%); margin: 0 auto; }
        .hidden { display: none !important; }
        .text-center { text-align: center; }
        
        /* Background atmosphere (NEW) */
        .bg-grid {
            position: fixed;
            inset: 0;
            background-image:
                linear-gradient(to right, rgba(255,255,255,0.03) 1px, transparent 1px),
                linear-gradient(to bottom, rgba(255,255,255,0.03) 1px, transparent 1px);
            background-size: 64px 64px;
            pointer-events: none;
            z-index: 0;
            opacity: 0.35;
        }
        .orb {
            position: fixed;
            width: 420px;
            height: 420px;
            filter: blur(40px);
            opacity: 0.35;
            border-radius: 50%;
            z-index: 0;
            animation: float 18s ease-in-out infinite;
        }
        .orb.one { background: radial-gradient(circle, var(--brand), transparent 60%); top: -140px; right: 6%; }
        .orb.two { background: radial-gradient(circle, var(--brand-2), transparent 60%); bottom: -160px; left: 8%; animation-delay: -6s; }
        .orb.three { background: radial-gradient(circle, var(--brand-3), transparent 60%); top: 45%; left: 60%; animation-delay: -10s; }
        @keyframes float { 0%,100% { transform: translateY(0); } 50% { transform: translateY(18px); } }

        /* Progress bar (NEW) */
        .progress {
            position: fixed; top: 0; left: 0; height: 3px; width: 100%;
            transform-origin: 0 50%; transform: scaleX(0);
            background: linear-gradient(90deg, var(--brand), var(--brand-2)); z-index: 100;
        }

        /* --- HEADER (NEW Style) --- */
        header {
            position: fixed; top: 16px; left: 50%; transform: translateX(-50%);
            width: min(1200px, 94%); height: var(--header-h);
            display: flex; align-items: center; justify-content: space-between;
            padding: 0 18px; border-radius: 999px; border: 1px solid var(--border);
            background: rgba(10,14,20,0.7); backdrop-filter: blur(18px); z-index: 50;
            transition: all 0.3s var(--ease);
        }
        body.theme-light header { background: rgba(255,255,255,0.85); }
        header.scrolled { top: 0; border-radius: 0; width: 100%; box-shadow: var(--shadow); }

        .logo { display: flex; align-items: center; gap: 12px; font-family: var(--font-display); font-weight: 700; letter-spacing: -0.02em; cursor: pointer; }
        .logo img { width: 34px; height: 34px; }

        nav.nav { display: none; gap: 18px; align-items: center; font-weight: 600; color: var(--muted); }
        nav.nav a { padding: 8px 12px; border-radius: 999px; transition: all 0.2s var(--ease); }
        nav.nav a.active { color: var(--text); background: var(--panel-2); border: 1px solid var(--border); }
        nav.nav a:hover { color: var(--text); }
        
        .nav-actions { display: flex; gap: 10px; align-items: center; }
        
        /* --- BUTTONS (New Gradient Style) --- */
        .btn {
            padding: 12px 18px; border-radius: 999px; border: 1px solid transparent;
            font-weight: 600; transition: all 0.25s var(--ease);
            display: inline-flex; align-items: center; gap: 10px; white-space: nowrap;
            cursor: pointer; font-size: 0.9rem;
        }
        .btn-primary {
            background: linear-gradient(135deg, var(--brand), var(--brand-2));
            color: #0b0f14; box-shadow: 0 10px 30px rgba(118,247,210,0.3);
        }
        .btn-primary:hover { transform: translateY(-2px); }
        .btn-ghost { background: transparent; border: 1px solid var(--border); color: var(--text); }
        .btn-ghost:hover { border-color: rgba(255,255,255,0.2); }
        .btn-danger { background: var(--danger); color: white; }
        .btn-success { background: var(--success); color: white; }
        
        .icon-btn {
            width: 40px; height: 40px; border-radius: 50%; display: grid; place-items: center;
            background: var(--panel); border: 1px solid var(--border); color: var(--text);
            transition: all 0.2s var(--ease); cursor: pointer;
        }
        .icon-btn:hover { transform: translateY(-2px); }

        .menu-toggle { font-size: 1.6rem; cursor: pointer; color: var(--text); }

        /* Mobile menu (New) */
        .mobile-menu {
            position: fixed; inset: 0; background: rgba(10,14,20,0.96); z-index: 60;
            padding: 100px 24px 24px; display: none; overflow-y: auto;
        }
        body.theme-light .mobile-menu { background: rgba(255,255,255,0.96); }
        .mobile-menu.open { display: block; }
        .mobile-menu a { display: block; padding: 14px 0; font-size: 1.1rem; border-bottom: 1px solid var(--border); }

        /* --- MAIN & PAGES --- */
        main { position: relative; z-index: 2; }
        .page { display: none; padding-top: 120px; padding-bottom: 80px; opacity: 0; transform: translateY(20px); transition: opacity 0.4s var(--ease), transform 0.4s var(--ease); }
        .page.active { display: block; opacity: 1; transform: translateY(0); }

        /* Reveal Animations */
        .reveal { opacity: 0; transform: translateY(16px); transition: all 0.6s var(--ease); }
        .reveal.visible { opacity: 1; transform: translateY(0); }

        /* Typography */
        .section-title { font-family: var(--font-display); font-size: clamp(1.6rem, 3.6vw, 2.6rem); margin-bottom: 10px; }
        .section-sub { color: var(--muted); max-width: 680px; margin-bottom: 2rem; }

        /* --- HERO (New Style) --- */
        .hero { display: grid; gap: 48px; grid-template-columns: 1fr; align-items: center; }
        .tag {
            display: inline-flex; align-items: center; gap: 8px; padding: 6px 14px;
            border-radius: 999px; background: rgba(118,247,210,0.12);
            border: 1px solid rgba(118,247,210,0.3); color: var(--brand);
            font-size: 0.85rem; font-weight: 600; margin-bottom: 1rem;
        }
        .hero h1 { font-family: var(--font-display); font-size: clamp(2.6rem, 6vw, 5.2rem); line-height: 1.04; letter-spacing: -0.03em; margin: 18px 0; }
        .hero p { color: var(--muted); font-size: 1.05rem; max-width: 600px; margin-bottom: 2rem; }
        .hero-cta { display: flex; gap: 12px; flex-wrap: wrap; margin-top: 22px; }

        .hero-panel {
            background: var(--panel); border: 1px solid var(--border); border-radius: var(--radius-lg);
            padding: 22px; box-shadow: var(--shadow); position: relative; overflow: hidden;
        }
        .wave {
            display: flex; align-items: flex-end; gap: 4px; height: 80px; margin: 12px 0 18px;
        }
        .wave span {
            width: 6px; height: 40%; background: linear-gradient(180deg, var(--brand), var(--brand-2));
            border-radius: 6px; animation: wave 1.1s ease-in-out infinite;
            animation-delay: calc(var(--i) * 0.08s);
        }
        @keyframes wave { 0%,100% { transform: scaleY(0.35); } 50% { transform: scaleY(1); } }

        .panel-metrics { display: grid; grid-template-columns: repeat(3, minmax(0,1fr)); gap: 10px; }
        .metric { background: var(--panel-2); border: 1px solid var(--border); border-radius: 14px; padding: 12px; text-align: left; }
        .metric h4 { font-family: var(--font-display); font-size: 1.1rem; margin-bottom: 4px; }
        .metric span { color: var(--muted); font-size: 0.85rem; }

        /* Strip Marquee */
        .strip {
            border-top: 1px solid var(--border); border-bottom: 1px solid var(--border);
            padding: 16px 0; margin: 60px 0; overflow: hidden; background: rgba(255,255,255,0.02);
        }
        .strip-track {
            display: flex; gap: 32px; width: max-content; color: var(--muted); font-weight: 600;
            animation: marquee 28s linear infinite;
        }
        @keyframes marquee { from { transform: translateX(0); } to { transform: translateX(-50%); } }

        /* Grids & Cards */
        .grid-3 { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 18px; }
        .card {
            background: var(--panel); border: 1px solid var(--border); border-radius: var(--radius);
            padding: 22px; transition: transform 0.25s var(--ease), box-shadow 0.25s var(--ease);
            text-align: left;
        }
        .card:hover { transform: translateY(-6px); box-shadow: var(--shadow); }
        .card h3 { font-family: var(--font-display); font-size: 1.2rem; margin-bottom: 0.5rem; color: var(--text); }

        .icon-pill {
            width: 42px; height: 42px; border-radius: 12px; display: grid; place-items: center;
            background: rgba(118,247,210,0.12); color: var(--brand); border: 1px solid rgba(118,247,210,0.3);
            margin-bottom: 12px; font-size: 1.2rem;
        }

        /* --- AUTH & FORMS (Migrated to New Style) --- */
        .auth-container { max-width: 500px; margin: 0 auto; }
        .form-group { margin-bottom: 1.5rem; text-align: left; }
        .form-label { display: block; margin-bottom: 0.5rem; font-size: 0.85rem; color: var(--muted); font-weight: 600; }
        
        .form-input, .form-select, textarea {
            width: 100%; padding: 14px; border-radius: 12px; border: 1px solid var(--border);
            background: rgba(255,255,255,0.05); color: var(--text); font-size: 1rem;
            transition: border 0.2s;
        }
        .form-input:focus, .form-select:focus, textarea:focus {
            outline: none; border-color: var(--brand);
            background: rgba(255,255,255,0.08);
        }
        textarea { min-height: 120px; resize: vertical; }
        .form-select { appearance: none; background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%239fb0c4' stroke-width='2'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E"); background-repeat: no-repeat; background-position: right 1rem center; background-size: 1rem; }
        
        /* Radio Options (Migrated) */
        .radio-group { display: grid; gap: 1rem; }
        .radio-option { 
            border: 1px solid var(--border); padding: 1rem 1.2rem; border-radius: 12px; 
            display: flex; align-items: center; gap: 12px; cursor: pointer; 
            transition: all 0.2s ease; background: rgba(255,255,255,0.02); 
        }
        .radio-option:hover { border-color: var(--brand); }
        .radio-option.selected { border-color: var(--brand); background: rgba(118,247,210,0.05); }
        .radio-option.selected span { color: var(--brand); font-weight: 700; }
        .radio-option input { display: none; }

        /* --- PRICING (New Style + Old Logic) --- */
        .pricing-toggle {
            display: inline-flex; gap: 6px; padding: 6px; border-radius: 999px;
            border: 1px solid var(--border); background: var(--panel); margin: 18px 0;
        }
        .toggle-btn {
            padding: 8px 14px; border-radius: 999px; border: none;
            background: transparent; color: var(--muted); font-weight: 600; cursor: pointer;
        }
        .toggle-btn.active { background: linear-gradient(135deg, var(--brand), var(--brand-2)); color: #0b0f14; }

        .price-card {
            border-radius: var(--radius-lg); padding: 24px;
            background: linear-gradient(180deg, var(--panel-2), var(--panel));
            border: 1px solid var(--border); position: relative; text-align: left;
        }
        .price-card.featured { border-color: rgba(118,247,210,0.45); box-shadow: 0 24px 70px rgba(118,247,210,0.18); }
        .price { font-size: 2.2rem; font-family: var(--font-display); margin: 10px 0 8px; }
        .price span { color: var(--muted); font-size: 0.95rem; }
        .list { display: grid; gap: 8px; color: var(--muted); font-size: 0.95rem; margin: 12px 0 18px; }
        .list i { color: var(--brand); margin-right: 8px; }

        .setup-fee-tag {
            display: block; text-align: center; font-size: 0.75rem; color: var(--warning);
            font-weight: 700; margin-bottom: 0.5rem; background: rgba(245, 158, 11, 0.1);
            padding: 4px; border-radius: 4px; border: 1px solid rgba(245, 158, 11, 0.3);
        }

        /* --- CHECKOUT PAGE (Migrated) --- */
        .checkout-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; }
        @media(max-width: 768px) { .checkout-grid { grid-template-columns: 1fr; } }
        
        .summary-row { display: flex; justify-content: space-between; margin-bottom: 0.5rem; font-size: 0.9rem; color: var(--muted); }
        .summary-total { font-size: 1.5rem; font-weight: 700; color: var(--text); border-top: 1px solid var(--border); padding-top: 1rem; margin-top: 1rem; }

        /* --- FAQ ACCORDION (New Style) --- */
        .faq-item { background: var(--panel); border: 1px solid var(--border); border-radius: 14px; margin-bottom: 10px; overflow: hidden; }
        .faq-q { padding: 16px; display: flex; justify-content: space-between; align-items: center; cursor: pointer; font-weight: 600; }
        .faq-a { max-height: 0; overflow: hidden; transition: max-height 0.3s var(--ease), padding 0.3s var(--ease); padding: 0 16px; color: var(--muted); }
        .faq-item.open .faq-a { max-height: 200px; padding: 0 16px 16px; }

        /* --- REVIEWS (New Slider) --- */
        .review-slider { position: relative; height: 220px; margin-top: 20px; }
        .review-slide { position: absolute; inset: 0; opacity: 0; transform: translateY(8px); transition: all 0.5s var(--ease); background: var(--panel); border: 1px solid var(--border); border-radius: var(--radius); padding: 20px; display: flex; flex-direction: column; justify-content: center; }
        .review-slide.active { opacity: 1; transform: translateY(0); }
        .stars { color: var(--brand-3); letter-spacing: 2px; margin-bottom: 0.5rem; }
        .review-text { font-style: italic; color: var(--text); margin-bottom: 1rem; }
        .review-author { font-weight: 700; color: var(--muted); text-align: right; }
        
        .dots { display: flex; gap: 8px; margin-top: 12px; justify-content: center; }
        .dot { width: 8px; height: 8px; border-radius: 50%; background: var(--border); cursor: pointer; }
        .dot.active { background: var(--brand); }

        /* --- FOOTER (New) --- */
        footer { border-top: 1px solid var(--border); padding: 44px 0 24px; color: var(--muted); margin-top: auto; position: relative; z-index: 2; }

        /* --- TOAST (New) --- */
        .toast-wrap { position: fixed; right: 18px; bottom: 18px; display: grid; gap: 10px; z-index: 120; pointer-events: none; }
        .toast {
            pointer-events: auto; background: var(--panel-2); border: 1px solid var(--border);
            padding: 12px 14px; border-radius: 12px; box-shadow: var(--shadow);
            display: flex; align-items: center; gap: 10px; color: var(--text);
            animation: slideIn 0.3s var(--ease); min-width: 250px;
        }
        .toast i { font-size: 1.2rem; }
        .toast.success i { color: var(--success); }
        .toast.error i { color: var(--danger); }
        .toast.warning i { color: var(--warning); }
        @keyframes slideIn { from { transform: translateX(100%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }

        /* Modals & Overlays */
        #processing-overlay {
            position: fixed; inset: 0; background: rgba(11, 15, 20, 0.95); backdrop-filter: blur(10px);
            z-index: 100002; display: none; flex-direction: column; justify-content: center; align-items: center;
            text-align: center; padding: 2rem; color: var(--text);
        }
        .process-spinner { width: 60px; height: 60px; border: 4px solid var(--border); border-left-color: var(--brand); border-radius: 50%; animation: spin 1s linear infinite; margin-bottom: 2rem; }
        @keyframes spin { 100% { transform: rotate(360deg); } }
        
        #maintenance-overlay {
            position: fixed; inset: 0; background: var(--bg); z-index: 99999;
            display: none; justify-content: center; align-items: center; flex-direction: column;
            opacity: 0; pointer-events: none; transition: opacity 0.5s ease;
        }
        #maintenance-overlay.active { opacity:1; pointer-events: all; }

        /* Responsive */
        @media (min-width: 960px) {
            nav.nav { display: flex; }
            .menu-toggle { display: none; }
            .hero { grid-template-columns: 1.2fr 0.8fr; }
        }
        @media (max-width: 640px) {
            header { padding: 0 12px; }
            .nav-actions .btn-ghost { display: none; }
            .review-slider { height: 260px; }
        }
    </style>
</head>
<body>

    <!-- Maintenance Overlay -->
    <div id="maintenance-overlay">
        <div class="container text-center">
            <i class="ri-tools-line" style="font-size:5rem; color: var(--warning); margin-bottom: 2rem;"></i>
            <h1>Site Under Maintenance</h1>
            <p style="color: var(--muted); margin-top: 1rem;">We're making improvements. Please check back soon.</p>
        </div>
    </div>

    <!-- Processing Overlay -->
    <div id="processing-overlay">
        <div class="process-spinner"></div>
        <h2>Processing...</h2>
        <p style="color: var(--muted); margin-top: 1rem;">Please wait while we confirm your payment.</p>
    </div>

    <!-- Background Atmosphere -->
    <div class="bg-grid"></div>
    <div class="orb one"></div>
    <div class="orb two"></div>
    <div class="orb three"></div>
    <div class="progress" id="progress"></div>

    <!-- Header -->
    <header id="siteHeader">
        <a href="/" class="logo" onclick="routeLink(event, '/')">
            <img src="https://raw.githubusercontent.com/ddnetwork-one/ddnetwork-store/refs/heads/main/crop_ddnlogo.png" alt="DDNetwork One logo">
            DDNetwork One
        </a>

        <nav class="nav">
            <a href="/" onclick="routeLink(event, '/')" data-nav>Home</a>
            <a href="/pricing" onclick="routeLink(event, '/pricing')" data-nav>Pricing</a>
            <a href="/work" onclick="routeLink(event, '/work')" data-nav>Work</a>
            <a href="/reviews" onclick="routeLink(event, '/reviews')" data-nav>Reviews</a>
            <a href="/helpdesk" onclick="routeLink(event, '/helpdesk')" data-nav>Support</a>
            <a href="/about" onclick="routeLink(event, '/about')" data-nav>About</a>
        </nav>

        <div class="nav-actions">
            <button class="icon-btn" id="themeToggle" aria-pressed="false" title="Toggle theme">
                <i class="ri-sun-line"></i>
            </button>
            <!-- Dynamic Auth Buttons Injected Here -->
            <div id="desktopAuthLinks"></div>
            <div class="menu-toggle" id="menuToggle"><i class="ri-menu-4-line"></i></div>
        </div>
    </header>

    <!-- Mobile Menu -->
    <div class="mobile-menu" id="mobileMenu">
        <div id="mobileAuthLinksContainer">
            <!-- Dynamic Links -->
        </div>
        <a href="/" onclick="routeLink(event, '/'); toggleDrawer()">Home</a>
        <a href="/pricing" onclick="routeLink(event, '/pricing'); toggleDrawer()">Pricing</a>
        <a href="/work" onclick="routeLink(event, '/work'); toggleDrawer()">Work</a>
        <a href="/reviews" onclick="routeLink(event, '/reviews'); toggleDrawer()">Reviews</a>
        <a href="/helpdesk" onclick="routeLink(event, '/helpdesk'); toggleDrawer()">Support</a>
        <a href="/about" onclick="routeLink(event, '/about'); toggleDrawer()">About</a>
    </div>

    <!-- Main App -->
    <main id="app">

        <!-- HOME PAGE -->
        <section id="home" class="page active">
            <div class="container hero">
                <div class="reveal visible">
                    <span class="tag"><i class="ri-sparkling-2-fill"></i> Malaysia‑built, global‑ready</span>
                    <h1>Premium websites, portals, and AI experiences that feel modern and perform fast.</h1>
                    <p>DDNetwork One helps ambitious teams build conversion‑ready web experiences with clean design, measurable performance, and scalable systems.</p>
                    <div class="hero-cta">
                        <a href="/pricing" onclick="routeLink(event, '/pricing')" class="btn btn-primary">Explore Packages</a>
                        <a href="/work" onclick="routeLink(event, '/work')" class="btn btn-ghost">See Recent Work</a>
                    </div>
                </div>

                <div class="hero-panel reveal visible">
                    <div style="display:flex; justify-content:space-between; margin-bottom:14px;">
                        <strong style="font-family:var(--font-display);">DDN Studio Preview</strong>
                        <span class="tag" style="font-size:0.7rem; padding:4px 8px;">Live</span>
                    </div>
                    <div style="color:var(--muted); font-size:0.95rem;">Motion‑first, product‑grade UI system.</div>
                    <div class="wave">
                        <span style="--i:1"></span><span style="--i:2"></span><span style="--i:3"></span>
                        <span style="--i:4"></span><span style="--i:5"></span><span style="--i:6"></span>
                        <span style="--i:7"></span><span style="--i:8"></span><span style="--i:9"></span>
                        <span style="--i:10"></span>
                    </div>
                    <div class="panel-metrics">
                        <div class="metric"><h4>5.0</h4><span>Avg. Rating</span></div>
                        <div class="metric"><h4>24h</h4><span>Response</span></div>
                        <div class="metric"><h4>SEO</h4><span>Ready</span></div>
                    </div>
                </div>
            </div>

            <div class="strip">
                <div class="container">
                    <div class="strip-track">
                        <span>Secure payments</span> <span>Mobile‑first</span> <span>Fast delivery</span>
                        <span>SEO ready</span> <span>AI automation</span> <span>Custom portals</span>
                        <span>Secure payments</span> <span>Mobile‑first</span> <span>Fast delivery</span>
                    </div>
                </div>
            </div>

            <section class="container" style="margin-top:-10px;">
                <h2 class="section-title">What we build</h2>
                <p class="section-sub">Clear, modern experiences that make your business feel premium.</p>
                <div class="grid-3" style="margin-top:20px;">
                    <div class="card">
                        <div class="icon-pill"><i class="ri-layout-4-line"></i></div>
                        <h3>Static Websites</h3>
                        <p>Fast, elegant landing pages and product sites that load instantly.</p>
                    </div>
                    <div class="card">
                        <div class="icon-pill"><i class="ri-layout-masonry-line"></i></div>
                        <h3>Interactive Front‑End</h3>
                        <p>Animated, story‑driven UI for richer engagement and higher conversion.</p>
                    </div>
                    <div class="card">
                        <div class="icon-pill"><i class="ri-robot-2-line"></i></div>
                        <h3>AI‑Powered Systems</h3>
                        <p>Chatbots, workflows, and automation that save time and cost.</p>
                    </div>
                </div>
            </section>
        </section>

        <!-- PRICING PAGE -->
        <section id="pricing" class="page">
            <div class="container">
                <div class="text-center">
                    <h2 class="section-title">Pricing Packages</h2>
                    <p class="section-sub">Transparent pricing. Choose plan that fits your needs.</p>
                </div>

                <div class="pricing-toggle" style="justify-content: center; display: flex;">
                    <button class="toggle-btn active" id="btn-monthly" onclick="setBilling('monthly')">Monthly</button>
                    <button class="toggle-btn" id="btn-onetime" onclick="setBilling('onetime')">One‑Time</button>
                </div>

                <div class="grid-3" style="margin-top: 2rem;">
                    <!-- Package 1: Basic -->
                    <div class="price-card">
                        <h3>Basic HTML</h3>
                        <div class="setup-fee-tag hidden" id="html-setup-tag">Setup Fee: RM 100</div>
                        <div class="price"><span id="price-html">RM 99</span> <span>/month</span></div>
                        <div class="list">
                            <div><i class="ri-check-line"></i> 1 Static Landing Page</div>
                            <div><i class="ri-check-line"></i> Mobile Responsive</div>
                            <div><i class="ri-check-line"></i> Basic SEO</div>
                            <div><i class="ri-check-line"></i> Contact Form</div>
                            <div><i class="ri-check-line"></i> Free Subdomain (1st Year)</div>
                            <div class="hidden" id="html-feat-no-support" style="color:var(--danger)"><i class="ri-close-line"></i> No maintenance included</div>
                        </div>
                        <button class="btn btn-ghost" style="width:100%" onclick="attemptSelectPackage('Basic HTML Website', 'html')">Select</button>
                    </div>

                    <!-- Package 2: Front-End (Featured) -->
                    <div class="price-card featured">
                        <h3>Front‑End Website</h3>
                        <div class="setup-fee-tag" id="frontend-setup-tag">Setup Fee: RM 200</div>
                        <div class="price"><span id="price-frontend">RM 249</span> <span>/month</span></div>
                        <div class="list">
                            <div><i class="ri-check-line"></i> Up to 5 Pages</div>
                            <div><i class="ri-check-line"></i> Interactive UI</div>
                            <div><i class="ri-check-line"></i> WhatsApp Integration</div>
                            <div><i class="ri-check-line"></i> Hosting Included</div>
                            <div><i class="ri-check-line"></i> Maintenance & Support</div>
                        </div>
                        <button class="btn btn-primary" style="width:100%" onclick="attemptSelectPackage('Front-End Website', 'frontend')">Select Plan</button>
                    </div>

                    <!-- Package 3: AI -->
                    <div class="price-card">
                        <h3>AI‑Powered</h3>
                        <div class="setup-fee-tag" id="ai-setup-tag">Setup Fee: RM 400</div>
                        <div class="price"><span id="price-ai">RM 349</span> <span>/month</span></div>
                        <div class="list">
                            <div><i class="ri-check-line"></i> All Front-End Features</div>
                            <div><i class="ri-check-line"></i> AI Chatbot Integration</div>
                            <div><i class="ri-check-line"></i> Lead Automation</div>
                            <div><i class="ri-check-line"></i> Smart Analytics</div>
                            <div><i class="ri-check-line"></i> Priority Support</div>
                        </div>
                        <button class="btn btn-ghost" style="width:100%" onclick="attemptSelectPackage('AI Powered Website', 'ai')">Request Quote</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- WORK / PORTFOLIO PAGE -->
        <section id="work" class="page">
            <div class="container">
                <h2 class="section-title text-center">Recent Work</h2>
                <p class="section-sub text-center">Trusted by forward-thinking businesses.</p>
                <div id="portfolio-grid" class="grid-3" style="margin-top: 2rem;">
                    <!-- Dynamic Content -->
                </div>
            </div>
        </section>

        <!-- REVIEWS PAGE -->
        <section id="reviews" class="page">
            <div class="container">
                <h2 class="section-title text-center">Client Reviews</h2>
                <p class="section-sub text-center">Real feedback from teams who shipped with us.</p>

                <div class="review-slider" id="reviewSlider">
                    <!-- Dynamic Slides -->
                </div>
                <div class="dots" id="reviewDots"></div>

                <!-- Submit Review Form -->
                <div class="card" style="max-width: 600px; margin: 2rem auto;">
                    <h3 style="margin-bottom: 1rem;">Leave a Review</h3>
                    <form id="review-form" onsubmit="handleReviewSubmit(event)">
                        <div class="form-group">
                            <label class="form-label">Rating</label>
                            <div style="display:flex; gap:5px; font-size:1.5rem; color:var(--brand-3);">
                                <i class="ri-star-line" onclick="setRating(1)" style="cursor:pointer"></i>
                                <i class="ri-star-line" onclick="setRating(2)" style="cursor:pointer"></i>
                                <i class="ri-star-line" onclick="setRating(3)" style="cursor:pointer"></i>
                                <i class="ri-star-line" onclick="setRating(4)" style="cursor:pointer"></i>
                                <i class="ri-star-line" onclick="setRating(5)" style="cursor:pointer"></i>
                            </div>
                            <input type="hidden" id="rating-value" value="0">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Comment</label>
                            <textarea id="review-comment" class="form-input" rows="3" placeholder="Share your experience..." required></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary" style="width:100%">Submit Review</button>
                    </form>
                </div>
            </div>
        </section>

        <!-- CHECKOUT PAGE -->
        <section id="checkout" class="page">
            <div class="container">
                <h2 class="section-title text-center">Checkout</h2>
                <p class="section-sub text-center">Secure your package and finalize details.</p>

                <div class="checkout-grid">
                    <!-- Order Summary -->
                    <div class="card">
                        <h3 style="margin-bottom: 1rem; border-bottom: 1px solid var(--border); padding-bottom: 1rem;">Order Summary</h3>
                        <div class="summary-row"><span>Package:</span> <strong id="co-pkg-name">-</strong></div>
                        <div class="summary-row"><span>Setup Fee:</span> <span id="co-setup">RM 0</span></div>
                        <div class="summary-row"><span>Subscription:</span> <span id="co-sub">RM 0</span></div>
                        <div class="summary-row"><span>Domain:</span> <span id="co-domain">Free (1st Year)</span></div>
                        <div class="summary-row" id="co-discount-row" style="display:none; color:var(--success);"><span>Discount:</span> <span id="co-discount">-RM 0</span></div>
                        <div class="summary-total"><span>Total:</span> <span id="co-total">RM 0</span></div>
                        
                        <div style="margin-top: 1rem;">
                            <button class="btn btn-secondary" style="width:48%" onclick="setPaymentMode('full')" id="btn-pay-full">Pay Full</button>
                            <button class="btn btn-ghost" style="width:48%; float:right" onclick="setPaymentMode('deposit')" id="btn-pay-deposit">Pay Deposit (50%)</button>
                        </div>
                    </div>

                    <!-- Details Form -->
                    <div class="card">
                        <h3 style="margin-bottom: 1rem;">Details</h3>
                        <form id="checkoutForm" onsubmit="return false;">
                            <div class="form-group">
                                <label class="form-label">Full Name</label>
                                <input type="text" id="co-name" class="form-input" placeholder="Your Name" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Phone Number</label>
                                <input type="tel" id="co-phone" class="form-input" placeholder="0123456789" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Email</label>
                                <input type="email" id="co-email" class="form-input" placeholder="hello@example.com" required>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Domain Choice</label>
                                <div class="radio-group">
                                    <div class="radio-option selected" onclick="updateDomain('sub', this)">
                                        <input type="radio" name="domain_type" value="sub" checked> 
                                        <span>DDNetwork Subdomain (Free 1st Year)</span>
                                    </div>
                                    <div class="radio-option" onclick="updateDomain('custom', this)">
                                        <input type="radio" name="domain_type" value="custom"> 
                                        <span>I have my own domain</span>
                                    </div>
                                </div>
                                <div id="input-subdomain" style="margin-top: 10px;">
                                    <input type="text" id="subdomain-text" class="form-input" placeholder="yourname" oninput="updateSummaryText()">
                                    <span style="font-size: 0.8rem; color: var(--muted); margin-top: 5px; display: block;">URL: <span id="url-preview" style="color: var(--brand);">.ddnet.my</span></span>
                                </div>
                                <div id="input-custom" class="hidden" style="margin-top: 10px;">
                                    <input type="text" id="custom-domain-text" class="form-input" placeholder="www.example.com" oninput="updateSummaryText()">
                                </div>
                            </div>

                            <div style="background: var(--panel-2); padding: 1rem; border-radius: 12px; margin-bottom: 1rem;">
                                <label style="display: flex; align-items: flex-start; gap: 12px; cursor: pointer; font-size: 0.9rem;">
                                    <input type="checkbox" id="terms-check" style="margin-top: 4px;">
                                    <span style="color: var(--muted);">I agree to <a href="#" onclick="navigateTo('/terms')" style="color:var(--brand); text-decoration:underline">Terms & Conditions</a>.</span>
                                </label>
                            </div>

                            <button type="button" id="btn-pay-now" class="btn btn-primary" style="width: 100%;" onclick="initiateRazorpayPayment()">
                                <i class="ri-secure-payment-line"></i> Pay Now
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </section>

        <!-- LOGIN PAGE -->
        <section id="login" class="page">
            <div class="auth-container">
                <div class="card text-center">
                    <div class="icon-pill" style="margin: 0 auto 1rem; width: 60px; height: 60px;"><i class="ri-user-3-fill"></i></div>
                    <h2 class="section-title" style="font-size: 1.8rem;">Welcome Back</h2>
                    <p style="color:var(--muted); margin-bottom: 2rem;">Login to manage your orders.</p>
                    
                    <form onsubmit="handleLogin(event)">
                        <div class="form-group">
                            <input type="email" id="login-email" class="form-input" placeholder="Email Address" required>
                        </div>
                        <div class="form-group">
                            <input type="password" id="login-password" class="form-input" placeholder="Password" required>
                            <div style="text-align: right; margin-top: 5px;">
                                <a href="#" onclick="navigateTo('/forgot-password')" style="color:var(--brand); font-size: 0.8rem; cursor:pointer;">Forgot Password?</a>
                            </div>
                        </div>
                        <button type="submit" class="btn btn-primary" style="width: 100%;">Login</button>
                    </form>
                    
                    <div style="margin: 1.5rem 0; display: flex; align-items: center; gap: 10px;">
                        <div style="height: 1px; background: var(--border); flex: 1;"></div>
                        <span style="color: var(--muted); font-size: 0.8rem;">OR</span>
                        <div style="height: 1px; background: var(--border); flex: 1;"></div>
                    </div>

                    <button type="button" class="btn btn-ghost" style="width: 100%;" onclick="handleGoogleAuth()">
                        <i class="ri-google-fill" style="color:#DB4437"></i> Continue with Google
                    </button>

                    <div style="margin-top: 1.5rem; font-size: 0.9rem; color: var(--muted);">
                        Don't have an account? <a href="#" onclick="navigateTo('/signup')" style="color:var(--brand); cursor:pointer;">Sign Up</a>
                    </div>
                </div>
            </div>
        </section>

        <!-- SIGNUP PAGE -->
        <section id="signup" class="page">
            <div class="auth-container">
                <div class="card text-center">
                    <h2 class="section-title" style="font-size: 1.8rem;">Create Account</h2>
                    <p style="color:var(--muted); margin-bottom: 2rem;">Join us to track your projects.</p>
                    
                    <form onsubmit="handleSignup(event)">
                        <div class="form-group">
                            <input type="text" id="signup-name" class="form-input" placeholder="Full Name" required>
                        </div>
                        <div class="form-group">
                            <input type="tel" id="signup-phone" class="form-input" placeholder="Phone Number" required>
                        </div>
                        <div class="form-group">
                            <input type="email" id="signup-email" class="form-input" placeholder="Email Address" required>
                        </div>
                        <div class="form-group">
                            <input type="password" id="signup-password" class="form-input" placeholder="Password" required oninput="checkPasswordStrength()">
                            <div id="pass-reqs" style="display:flex; gap:5px; margin-top:5px; font-size:0.7rem; color:var(--muted);">
                                <span id="req-upper">Uppercase</span>
                                <span id="req-lower">Lowercase</span>
                                <span id="req-num">Number</span>
                                <span id="req-len">6+ Chars</span>
                            </div>
                        </div>
                        <button type="submit" class="btn btn-primary" style="width: 100%;">Sign Up</button>
                    </form>
                    
                    <button type="button" class="btn btn-ghost" style="width: 100%; margin-top: 1rem;" onclick="handleGoogleAuth()">
                        <i class="ri-google-fill" style="color:#DB4437"></i> Sign up with Google
                    </button>

                    <div style="margin-top: 1.5rem; font-size: 0.9rem; color: var(--muted);">
                        Already have an account? <a href="#" onclick="navigateTo('/login')" style="color:var(--brand); cursor:pointer;">Login</a>
                    </div>
                </div>
            </div>
        </section>

        <!-- PROFILE PAGE -->
        <section id="profile" class="page">
            <div class="auth-container">
                <div class="card text-center">
                    <div class="icon-pill" style="margin: 0 auto 1rem; width: 60px; height: 60px;"><i class="ri-user-settings-fill"></i></div>
                    <h2 class="section-title" style="font-size: 1.8rem;">My Profile</h2>
                    <p style="color:var(--muted); margin-bottom: 2rem;">Manage your details and view history.</p>
                    
                    <form onsubmit="handleProfileUpdate(event)">
                        <div class="form-group">
                            <label class="form-label">Full Name</label>
                            <input type="text" id="prof-name" class="form-input" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Email</label>
                            <input type="email" id="prof-email" class="form-input" readonly style="opacity:0.7">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Phone</label>
                            <input type="tel" id="prof-phone" class="form-input" required>
                        </div>
                        <button type="submit" class="btn btn-primary" style="width:100%">Update Profile</button>
                    </form>

                    <div style="margin-top: 2rem; border-top: 1px solid var(--border); padding-top: 1.5rem;">
                        <h3 style="margin-bottom:1rem; font-size:1.1rem; text-align:left;">Purchase History</h3>
                        <div id="order-history-container">
                            <!-- Table Injected Here -->
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- HELPDESK PAGE -->
        <section id="helpdesk" class="page">
            <div class="auth-container">
                <div class="card text-center">
                    <div class="icon-pill" style="margin: 0 auto 1rem; width: 60px; height: 60px;"><i class="ri-customer-service-2-fill"></i></div>
                    <h2 class="section-title" style="font-size: 1.8rem;">Support Helpdesk</h2>
                    <p style="color:var(--muted); margin-bottom: 2rem;">Submit a ticket or check status.</p>
                    
                    <form onsubmit="handleTicketSubmit(event)" style="text-align:left;">
                        <div class="grid-3" style="grid-template-columns: 1fr 1fr; gap: 1rem;">
                            <div class="form-group">
                                <label class="form-label">Name</label>
                                <input type="text" id="ticket-name" class="form-input" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Email</label>
                                <input type="email" id="ticket-email" class="form-input" required>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Issue Type</label>
                            <select id="ticket-type" class="form-select" required>
                                <option value="" disabled selected>Select issue...</option>
                                <option value="Login Issue">Login Issue</option>
                                <option value="Payment Issue">Payment Issue</option>
                                <option value="Website Down">Website Down</option>
                                <option value="Other">Other</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Message</label>
                            <textarea id="ticket-message" class="form-input" rows="4" required></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary" style="width:100%">Submit Ticket</button>
                    </form>
                </div>
            </div>
        </section>

        <!-- ABOUT PAGE -->
        <section id="about" class="page">
            <div class="container">
                <h2 class="section-title text-center">About Us</h2>
                <p class="section-sub text-center">Designed in Malaysia. Built for the world.</p>
                <div class="grid-3" style="margin-top:20px;">
                    <div class="card">
                        <h3>Mission</h3>
                        <p style="color:var(--muted)">Build digital systems that feel effortless for users and scalable for teams.</p>
                    </div>
                    <div class="card">
                        <h3>Approach</h3>
                        <p style="color:var(--muted)">We prioritize clarity, speed, and measurable outcomes.</p>
                    </div>
                    <div class="card">
                        <h3>Founder</h3>
                        <p style="color:var(--muted)">Danial Danish leads the team, focusing on design clarity and modern systems.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- FAQ PAGE -->
        <section id="faq" class="page">
            <div class="container">
                <h2 class="section-title text-center">FAQ</h2>
                <p class="section-sub text-center">Quick answers to common questions.</p>
                <div style="max-width: 800px; margin: 0 auto; margin-top: 1.5rem;">
                    <div class="faq-item">
                        <div class="faq-q">How long does delivery take? <i class="ri-arrow-down-s-line"></i></div>
                        <div class="faq-a">Simple websites typically take 3–7 working days. Complex systems take 2–4 weeks.</div>
                    </div>
                    <div class="faq-item">
                        <div class="faq-q">Do you provide hosting and domain? <i class="ri-arrow-down-s-line"></i></div>
                        <div class="faq-a">Yes. We include hosting in subscription plans and can set up your custom domain.</div>
                    </div>
                    <div class="faq-item">
                        <div class="faq-q">Can I update content later? <i class="ri-arrow-down-s-line"></i></div>
                        <div class="faq-a">Yes. We offer maintenance plans and can also provide CMS integration.</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- FORGOT PASSWORD PAGE -->
        <section id="forgot-password" class="page">
            <div class="auth-container">
                <div class="card text-center">
                    <h2 class="section-title" style="font-size: 1.8rem;">Reset Password</h2>
                    <p style="color:var(--muted); margin-bottom: 2rem;">Enter email to receive reset link.</p>
                    <form onsubmit="handleForgotPassword(event)">
                        <div class="form-group">
                            <input type="email" id="reset-email" class="form-input" placeholder="Email Address" required>
                        </div>
                        <button type="submit" class="btn btn-primary" style="width:100%">Send Link</button>
                    </form>
                    <div style="margin-top: 1.5rem;">
                        <a href="#" onclick="navigateTo('/login')" style="color:var(--brand); cursor:pointer;">Back to Login</a>
                    </div>
                </div>
            </div>
        </section>

        <!-- THANK YOU PAGE -->
        <section id="thank-you" class="page">
            <div class="auth-container text-center">
                <div class="icon-pill" style="margin: 0 auto 1rem; width: 80px; height: 80px; background: rgba(16, 185, 129, 0.1); border-color: var(--success);"><i class="ri-check-double-line" style="color:var(--success)"></i></div>
                <h2 class="section-title" style="font-size: 2rem;">Order Placed!</h2>
                <p style="color:var(--muted); margin: 1rem 0 2rem;">Thank you. We have received your order and will contact you shortly.</p>
                <button class="btn btn-primary" onclick="navigateTo('/')">Return Home</button>
            </div>
        </section>

    </main>

    <!-- FOOTER -->
    <footer>
        <div class="container" style="display:grid; gap:16px;">
            <div style="display:flex; justify-content:space-between; gap:16px; flex-wrap:wrap;">
                <div>
                    <div class="logo" style="margin-bottom:10px;">
                        <img src="https://raw.githubusercontent.com/ddnetwork-one/ddnetwork-store/refs/heads/main/crop_ddnlogo.png" alt="DDNetwork One logo">
                        DDNetwork One
                    </div>
                    <p style="color:var(--muted)">Designed in Malaysia. Built for the world.</p>
                </div>
                <div style="display:flex; gap:14px; align-items:center;">
                    <a href="https://www.linkedin.com/in/muhammad-danial-danish-217bb82ba/" target="_blank"><i class="ri-linkedin-fill"></i></a>
                    <a href="https://www.instagram.com/ddnet.my/" target="_blank"><i class="ri-instagram-line"></i></a>
                    <a href="https://tiktok.com/@danialddanish/" target="_blank"><i class="ri-tiktok-fill"></i></a>
                </div>
            </div>
            <div style="border-top:1px solid var(--border); padding-top:12px; font-size:0.9rem; text-align:center;">
                © 2025–2026 DD Cloud Network · DDNetwork One · Reg. No. 202603040752 (MA0342542-K)
            </div>
        </div>
    </footer>

    <!-- TOAST WRAP -->
    <div class="toast-wrap" id="toastWrap"></div>

    <!-- CHAT WIDGET -->
    <script src="https://app.livechatai.com/embed.js" data-id="cmlas1njr0001jj04hi5ygd18" async defer></script>

    <!-- MAIN JAVASCRIPT -->
    <script>
        // --- CORE SETUP ---
        const prefersReduced = window.matchMedia("(prefers-reduced-motion: reduce)").matches;
        const routes = {
            "/": "home", "/pricing": "pricing", "/work": "work", "/reviews": "reviews", 
            "/about": "about", "/faq": "faq", "/login": "login", "/signup": "signup", 
            "/profile": "profile", "/helpdesk": "helpdesk", "/checkout": "checkout", 
            "/forgot-password": "forgot-password", "/thank-you": "thank-you"
        };
        
        // --- FIREBASE CONFIG ---
        const firebaseConfig = {
            apiKey: "AIzaSyAwf31b-wpYQwPbd-3DxnqGVRw8g3xq938",
            authDomain: "ddnetwork-database.firebaseapp.com",
            projectId: "ddnetwork-database",
            storageBucket: "ddnetwork-database.firebasestorage.app",
            messagingSenderId: "699127560990",
            appId: "1:699127560990:web:vg8k3pcvhkomoeb99tr333960v6ohj5m."
        };
        let db, auth;
        let ADMIN_PHONE_NO = "60122600969";
        let currentUserRole = 'user';
        const RAZORPAY_KEY_ID = "rzp_live_SEL3cH71UlI5YI"; 

        try {
            firebase.initializeApp(firebaseConfig);
            db = firebase.firestore();
            auth = firebase.auth();
        } catch(e) { console.error("Firebase init error:", e); }

        // --- STATE ---
        let state = {
            packageType: null, packagePrice: 0, setupFee: 0, domainPrice: 0,
            discountCode: '', discountValue: 0, domainType: 'sub', domainName: '',
            billingCycle: 'monthly', paymentMode: 'full'
        };
        let selectedRating = 0;
        let billing = 'monthly';
        let reviewTimer = null;

        // --- PRICING DATA ---
        const PRICING_DATA = {
            html: { oneTime: 249, monthly: 99, setupFee: 100 },
            frontend: { oneTime: 1399, monthly: 249, setupFee: 200 },
            ai: { oneTime: 2499, monthly: 349, setupFee: 400 },
            bundle: { oneTime: 3499, monthly: 449, setupFee: 700 },
            portal: { oneTime: 3999, monthly: 549, setupFee: 700 }
        };

        // --- UI CONTROLLERS ---
        const header = document.getElementById("siteHeader");
        const progress = document.getElementById("progress");
        const menuToggle = document.getElementById("menuToggle");
        const mobileMenu = document.getElementById("mobileMenu");
        const themeToggle = document.getElementById("themeToggle");
        const toastWrap = document.getElementById("toastWrap");

        // Theme Toggle
        themeToggle?.addEventListener("click", () => {
            const isLight = document.body.classList.toggle("theme-light");
            themeToggle.setAttribute("aria-pressed", String(isLight));
            themeToggle.innerHTML = isLight ? '<i class="ri-moon-line"></i>' : '<i class="ri-sun-line"></i>';
            localStorage.setItem("ddn-theme", isLight ? "light" : "dark");
        });
        if (localStorage.getItem("ddn-theme") === "light") {
            document.body.classList.add("theme-light");
            themeToggle.innerHTML = '<i class="ri-moon-line"></i>';
        }

        // Scroll Progress & Header Style
        function updateProgress() {
            const h = document.documentElement.scrollHeight - window.innerHeight;
            const ratio = h > 0 ? window.scrollY / h : 0;
            progress.style.transform = `scaleX(${ratio})`;
            if (window.scrollY > 40) header.classList.add("scrolled");
            else header.classList.remove("scrolled");
        }
        window.addEventListener("scroll", updateProgress, { passive: true });
        
        // Mobile Menu Toggle
        menuToggle?.addEventListener("click", () => {
            mobileMenu.classList.toggle("open");
            const icon = menuToggle.querySelector('i');
            icon.className = mobileMenu.classList.contains('open') ? 'ri-close-line' : 'ri-menu-4-line';
        });
        
        function toggleDrawer() {
            mobileMenu.classList.remove("open");
            menuToggle.querySelector('i').className = 'ri-menu-4-line';
        }

        // --- ROUTING ---
        function routeLink(e, path) {
            e.preventDefault();
            navigateTo(path);
        }
        function navigateTo(path) {
            const sectionId = routes[path] || 'home';
            window.history.pushState({ path: path }, "", path);
            updatePage(path);
            toggleDrawer();
        }
        window.addEventListener('popstate', (e) => {
            updatePage(window.location.pathname);
        });
        
        function updatePage(path) {
            const sectionId = routes[path] || 'home';
            const targetSection = document.getElementById(sectionId);
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            if(targetSection) {
                targetSection.classList.add('active');
                if (!prefersReduced) window.scrollTo({ top: 0, behavior: "smooth" });
                else window.scrollTo(0, 0);
                
                // Page specific hooks
                if(sectionId === 'reviews') startReviews();
                if(sectionId === 'work') loadPortfolio();
                if(sectionId === 'profile') loadProfilePageData();
                if(sectionId === 'checkout' && auth && auth.currentUser) fetchAndSyncUserData(auth.currentUser.uid);
            }
            
            // Update Nav Active State
            document.querySelectorAll('[data-nav]').forEach(a => {
                a.classList.toggle('active', a.getAttribute('href') === path);
            });
        }

        // --- TOAST ---
        function showToast(message, type = 'success') {
            const t = document.createElement("div");
            t.className = "toast " + type;
            let icon = 'ri-checkbox-circle-fill';
            if(type === 'error') icon = 'ri-error-warning-fill';
            if(type === 'warning') icon = 'ri-alert-fill';
            
            t.innerHTML = `<i class="${icon}"></i><span>${message}</span>`;
            toastWrap.appendChild(t);
            setTimeout(() => t.remove(), 3000);
        }

        // --- AUTH LOGIC ---
        function updateHeaderForUser(user) {
            const deskAuth = document.getElementById('desktopAuthLinks');
            const mobAuth = document.getElementById('mobileAuthLinksContainer');
            const isAdmin = currentUserRole === 'admin';
            
            if(user) {
                deskAuth.innerHTML = `
                    <a href="/profile" onclick="routeLink(event, '/profile')" class="btn btn-ghost">Profile</a>
                    ${isAdmin ? '<a href="admin.html" class="btn btn-ghost" style="color:var(--warning)">Admin</a>' : ''}
                    <button class="icon-btn" onclick="handleLogout()"><i class="ri-logout-box-r-line"></i></button>
                `;
                mobAuth.innerHTML = `
                    <a href="/profile" onclick="routeLink(event, '/profile')">Profile</a>
                    ${isAdmin ? '<a href="admin.html">Admin Portal</a>' : ''}
                    <a href="#" onclick="handleLogout()" style="color:var(--danger)">Logout</a>
                `;
            } else {
                deskAuth.innerHTML = `<a href="/login" onclick="routeLink(event, '/login')" class="btn btn-ghost">Login</a>`;
                mobAuth.innerHTML = `<a href="/login" onclick="routeLink(event, '/login')">Login</a><a href="/signup" onclick="routeLink(event, '/signup')">Sign Up</a>`;
            }
        }

        if(auth) {
            auth.onAuthStateChanged((user) => {
                if (user) {
                    db.collection("users").doc(user.uid).get().then((doc) => {
                        if (doc.exists) currentUserRole = doc.data().role || 'user';
                        updateHeaderForUser(user);
                        fetchAndSyncUserData(user.uid);
                    });
                } else { updateHeaderForUser(null); }
            });
        }

        function fetchAndSyncUserData(uid) {
            if(!db) return;
            db.collection("users").doc(uid).get().then((doc) => {
                if (doc.exists) {
                    const data = doc.data();
                    if(document.getElementById('co-name')) document.getElementById('co-name').value = data.name || '';
                    if(document.getElementById('co-phone')) document.getElementById('co-phone').value = data.phone || '';
                    if(document.getElementById('co-email')) document.getElementById('co-email').value = data.email || '';
                    if(document.getElementById('ticket-name')) document.getElementById('ticket-name').value = data.name || '';
                    if(document.getElementById('ticket-email')) document.getElementById('ticket-email').value = data.email || '';
                }
            });
        }

        function handleLogin(e) {
            e.preventDefault();
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;
            auth.signInWithEmailAndPassword(email, password)
                .then(() => { showToast("Login Successful!", "success"); navigateTo('/'); })
                .catch((error) => showToast(error.message, "error"));
        }

        function handleSignup(e) {
            e.preventDefault();
            const name = document.getElementById('signup-name').value;
            const phone = document.getElementById('signup-phone').value;
            const email = document.getElementById('signup-email').value;
            const password = document.getElementById('signup-password').value;
            
            auth.createUserWithEmailAndPassword(email, password).then((userCredential) => {
                return db.collection("users").doc(userCredential.user.uid).set({ 
                    name, phone, email, role: 'user', createdAt: firebase.firestore.FieldValue.serverTimestamp() 
                });
            }).then(() => { showToast("Account Created!", "success"); navigateTo('/'); })
            .catch((error) => showToast(error.message, "error"));
        }

        function handleLogout() {
            auth.signOut().then(() => { showToast("Logged out", "success"); navigateTo('/'); });
        }

        function handleGoogleAuth() {
            const provider = new firebase.auth.GoogleAuthProvider();
            auth.signInWithPopup(provider).then((result) => {
                const user = result.user;
                db.collection("users").doc(user.uid).get().then((doc) => {
                    if (!doc.exists) {
                        return db.collection("users").doc(user.uid).set({
                            name: user.displayName, email: user.email, phone: '', role: 'user',
                            createdAt: firebase.firestore.FieldValue.serverTimestamp()
                        });
                    }
                }).then(() => { showToast("Login Successful!", "success"); navigateTo('/'); });
            }).catch((error) => showToast(error.message, "error"));
        }

        function handleForgotPassword(e) {
            e.preventDefault();
            const email = document.getElementById('reset-email').value;
            auth.sendPasswordResetEmail(email)
                .then(() => { showToast("Reset link sent!", "success"); setTimeout(() => navigateTo('/login'), 2000); })
                .catch((error) => showToast(error.message, "error"));
        }

        function handleProfileUpdate(e) {
            e.preventDefault();
            if(!auth.currentUser) return;
            const name = document.getElementById('prof-name').value;
            const phone = document.getElementById('prof-phone').value;
            db.collection("users").doc(auth.currentUser.uid).update({ name, phone })
                .then(() => { showToast("Profile Updated!", "success"); fetchAndSyncUserData(auth.currentUser.uid); })
                .catch((err) => showToast(err.message, "error"));
        }
        
        function loadProfilePageData() {
            if(!auth || !auth.currentUser) return;
            db.collection("users").doc(auth.currentUser.uid).get().then((doc) => {
                if(doc.exists) {
                    document.getElementById('prof-name').value = doc.data().name || '';
                    document.getElementById('prof-email').value = doc.data().email || '';
                    document.getElementById('prof-phone').value = doc.data().phone || '';
                    loadOrderHistory();
                }
            });
        }
        
        function loadOrderHistory() {
            const container = document.getElementById('order-history-container');
            container.innerHTML = '<p style="color:var(--muted)">Loading...</p>';
            db.collection("orders").where("userId", "==", auth.currentUser.uid).orderBy("timestamp", "desc").limit(5)
            .get().then((snapshot) => {
                if(snapshot.empty) { container.innerHTML = '<p style="color:var(--muted)">No orders found.</p>'; return; }
                let html = '<table style="width:100%; border-collapse:collapse; font-size:0.9rem; margin-top:1rem;"><thead><tr style="border-bottom:1px solid var(--border);"><th style="text-align:left; padding:8px;">Date</th><th style="text-align:left; padding:8px;">Plan</th><th style="text-align:right; padding:8px;">Total</th></tr></thead><tbody>';
                snapshot.forEach(doc => {
                    const d = doc.data();
                    const date = d.timestamp ? new Date(d.timestamp.seconds * 1000).toLocaleDateString() : '-';
                    html += `<tr style="border-bottom:1px solid var(--border);"><td style="padding:8px;">${date}</td><td style="padding:8px;">${d.package}</td><td style="text-align:right; padding:8px; font-weight:bold;">${d.total}</td></tr>`;
                });
                html += '</tbody></table>';
                container.innerHTML = html;
            });
        }

        // --- PRICING & CHECKOUT LOGIC ---
        function setBilling(cycle) {
            billing = cycle;
            document.querySelectorAll("[data-billing]").forEach(b => b.classList.toggle("active", b.dataset.billing === cycle));
            updatePricingUI();
        }
        
        function updatePricingUI() {
            const keys = ['html', 'frontend', 'ai'];
            keys.forEach(key => {
                const priceEl = document.getElementById(`price-${key}`);
                const setupEl = document.getElementById(`${key}-setup-tag`);
                const noSuppEl = document.getElementById(`${key}-feat-no-support`);
                
                if(priceEl) {
                    if (billing === 'monthly') {
                        priceEl.innerText = `RM ${PRICING_DATA[key].monthly}`;
                        priceEl.nextElementSibling.innerText = '/month';
                        if(setupEl) setupEl.classList.remove('hidden');
                        if(noSuppEl) noSuppEl.classList.add('hidden');
                    } else {
                        priceEl.innerText = `RM ${PRICING_DATA[key].oneTime}`;
                        priceEl.nextElementSibling.innerText = '/one-time';
                        if(setupEl) setupEl.classList.add('hidden');
                        if(noSuppEl) noSuppEl.classList.remove('hidden');
                    }
                }
            });
        }

        function attemptSelectPackage(name, type) {
            if (!auth || !auth.currentUser) {
                showToast("Please login first", "warning");
                setTimeout(() => navigateTo('/login'), 1000);
                return;
            }
            selectPackage(name, type);
        }

        function selectPackage(name, type) {
            state.packageType = type;
            state.billingCycle = billing;
            state.setupFee = (billing === 'monthly') ? PRICING_DATA[type].setupFee : 0;
            state.packagePrice = (billing === 'monthly') ? PRICING_DATA[type].monthly : PRICING_DATA[type].oneTime;
            
            document.getElementById('co-pkg-name').innerText = name;
            updateTotal();
            navigateTo('/checkout');
        }

        function updateDomain(type, element) {
            state.domainType = type;
            document.querySelectorAll('.radio-option').forEach(el => el.classList.remove('selected'));
            element.classList.add('selected');
            
            document.getElementById('input-subdomain').style.display = type === 'sub' ? 'block' : 'none';
            document.getElementById('input-custom').style.display = type === 'sub' ? 'none' : 'block';
            updateSummaryText();
        }

        function updateSummaryText() {
            const preview = document.getElementById('url-preview');
            if(state.domainType === 'sub') {
                const val = document.getElementById('subdomain-text').value;
                state.domainName = val ? `${val}.ddnet.my` : '';
                preview.innerText = state.domainName || '.ddnet.my';
            } else {
                state.domainName = document.getElementById('custom-domain-text').value;
            }
            document.getElementById('co-domain').innerText = state.domainType === 'sub' ? "Free (1st Year)" : "Custom Domain";
        }

        function setPaymentMode(mode) {
            state.paymentMode = mode;
            document.getElementById('btn-pay-full').className = `btn ${mode === 'full' ? 'btn-secondary' : 'btn-ghost'}`;
            document.getElementById('btn-pay-deposit').className = `btn ${mode === 'deposit' ? 'btn-secondary' : 'btn-ghost'}`;
            updateTotal();
        }

        function updateTotal() {
            const total = state.packagePrice + state.setupFee;
            let payAmount = total;
            if(state.paymentMode === 'deposit') payAmount = total * 0.5;
            
            document.getElementById('co-setup').innerText = state.setupFee > 0 ? `RM ${state.setupFee}` : 'RM 0';
            document.getElementById('co-sub').innerText = `RM ${state.packagePrice}`;
            document.getElementById('co-total').innerText = `RM ${Math.round(payAmount)}`;
        }

        // --- RAZORPAY ---
        function initiateRazorpayPayment() {
            if(!document.getElementById('terms-check').checked) {
                return showToast("Please agree to Terms & Conditions", "warning");
            }
            
            const name = document.getElementById('co-name').value;
            const phone = document.getElementById('co-phone').value;
            const email = document.getElementById('co-email').value;
            if(!name || !phone || !email) return showToast("Fill all details", "warning");
            if(!state.domainName) return showToast("Enter domain name", "warning");

            const totalText = document.getElementById('co-total').innerText;
            const amountNumeric = parseFloat(totalText.replace('RM ', ''));
            
            // Save to localstorage for manual confirm fallback
            const pendingOrder = {
                userId: auth.currentUser ? auth.currentUser.uid : null,
                name, phone, email,
                package: document.getElementById('co-pkg-name').innerText,
                domain: state.domainName,
                total: `RM ${amountNumeric}`,
                timestamp: new Date().toISOString()
            };
            localStorage.setItem('pendingOrder', JSON.stringify(pendingOrder));

            const options = {
                "key": RAZORPAY_KEY_ID,
                "amount": Math.round(amountNumeric * 100), 
                "currency": "MYR",
                "name": "DDNetwork One",
                "description": "Website Package",
                "handler": function (response){
                    handlePaymentSuccess(response);
                },
                "prefill": { name, email, contact: phone },
                "theme": { "color": "#0b0f14" }
            };
            const rzp = new Razorpay(options);
            rzp.open();
        }

        function handlePaymentSuccess(response) {
            document.getElementById('processing-overlay').style.display = 'flex';
            const orderData = JSON.parse(localStorage.getItem('pendingOrder'));
            
            db.collection("orders").add({
                ...orderData,
                paymentId: response.razorpay_payment_id,
                status: "Paid",
                timestamp: firebase.firestore.FieldValue.serverTimestamp()
            }).then(() => {
                localStorage.removeItem('pendingOrder');
                document.getElementById('processing-overlay').style.display = 'none';
                showToast("Payment Successful!", "success");
                navigateTo('/thank-you');
            }).catch(err => {
                console.error(err);
                showToast("Error saving order. Contact support.", "error");
                document.getElementById('processing-overlay').style.display = 'none';
            });
        }

        // --- TICKETS ---
        async function handleTicketSubmit(e) {
            e.preventDefault();
            const name = document.getElementById('ticket-name').value;
            const email = document.getElementById('ticket-email').value;
            const type = document.getElementById('ticket-type').value;
            const message = document.getElementById('ticket-message').value;

            await db.collection("tickets").add({
                name, email, type, message, status: 'Open',
                timestamp: firebase.firestore.FieldValue.serverTimestamp(),
                userId: auth.currentUser ? auth.currentUser.uid : null
            });
            showToast("Ticket Submitted!", "success");
            e.target.reset();
        }

        // --- REVIEWS ---
        function loadPortfolio() {
            const container = document.getElementById('portfolio-grid');
            container.innerHTML = '<div class="card">Loading...</div>';
            db.collection("clients_portfolio").limit(6).get().then(snapshot => {
                if(snapshot.empty) { container.innerHTML = '<div class="card">No projects yet.</div>'; return; }
                container.innerHTML = '';
                snapshot.forEach(doc => {
                    const d = doc.data();
                    container.innerHTML += `
                        <div class="card work-card">
                            <img src="${d.img}" alt="${d.name}" style="height:200px; object-fit:cover; border-radius:12px;">
                            <h3 style="margin-top:10px;">${d.name}</h3>
                            <p style="color:var(--muted); font-size:0.9rem;">${d.link ? 'View Project' : 'Completed'}</p>
                            ${d.link ? `<a href="${d.link}" target="_blank" class="btn btn-ghost" style="margin-top:10px;">Visit Site</a>` : ''}
                        </div>
                    `;
                });
            });
        }

        function setRating(r) {
            selectedRating = r;
            const stars = document.querySelectorAll('#review-form .ri-star-line, #review-form .ri-star-fill');
            stars.forEach((s, i) => {
                s.className = i < r ? 'ri-star-fill' : 'ri-star-line';
            });
            document.getElementById('rating-value').value = r;
        }

        function handleReviewSubmit(e) {
            e.preventDefault();
            if(selectedRating === 0) return showToast("Select a rating", "warning");
            if(!auth.currentUser) return showToast("Login required", "warning");

            db.collection("customer_reviews").add({
                rating: selectedRating,
                comment: document.getElementById('review-comment').value,
                userName: auth.currentUser.displayName || auth.currentUser.email.split('@')[0],
                timestamp: firebase.firestore.FieldValue.serverTimestamp(),
                status: 'approved'
            }).then(() => {
                showToast("Review submitted!", "success");
                e.target.reset();
                setRating(0);
            });
        }

        function startReviews() {
            const slider = document.getElementById('reviewSlider');
            const dotsWrap = document.getElementById('reviewDots');
            
            db.collection("customer_reviews").orderBy("timestamp", "desc").limit(5).get().then(snapshot => {
                if(snapshot.empty) {
                    slider.innerHTML = '<div class="review-slide active"><p style="color:var(--muted)">No reviews yet.</p></div>';
                    return;
                }
                slider.innerHTML = '';
                dotsWrap.innerHTML = '';
                let i = 0;
                snapshot.forEach(doc => {
                    const d = doc.data();
                    const slide = document.createElement('div');
                    slide.className = 'review-slide' + (i===0 ? ' active' : '');
                    slide.innerHTML = `
                        <div class="stars">${'★'.repeat(d.rating)}${'☆'.repeat(5-d.rating)}</div>
                        <p class="review-text">"${d.comment}"</p>
                        <div class="review-author">- ${d.userName}</div>
                    `;
                    slider.appendChild(slide);
                    
                    const dot = document.createElement('div');
                    dot.className = 'dot' + (i===0 ? ' active' : '');
                    dot.onclick = () => showReview(i);
                    dotsWrap.appendChild(dot);
                    i++;
                });
                
                let current = 0;
                if(reviewTimer) clearInterval(reviewTimer);
                reviewTimer = setInterval(() => {
                    const slides = slider.querySelectorAll('.review-slide');
                    const dots = dotsWrap.querySelectorAll('.dot');
                    current = (current + 1) % slides.length;
                    showReview(current);
                }, 5000);
            });
        }
        
        function showReview(index) {
            const slides = document.querySelectorAll('.review-slide');
            const dots = document.querySelectorAll('.dot');
            slides.forEach((s, i) => s.classList.toggle('active', i === index));
            dots.forEach((d, i) => d.classList.toggle('active', i === index));
        }

        // --- MISC ---
        function checkPasswordStrength() {
            const p = document.getElementById('signup-password').value;
            document.getElementById('req-upper').style.color = /[A-Z]/.test(p) ? 'var(--success)' : 'var(--muted)';
            document.getElementById('req-lower').style.color = /[a-z]/.test(p) ? 'var(--success)' : 'var(--muted)';
            document.getElementById('req-num').style.color = /[0-9]/.test(p) ? 'var(--success)' : 'var(--muted)';
            document.getElementById('req-len').style.color = p.length >= 6 ? 'var(--success)' : 'var(--muted)';
        }

        // FAQ Toggle
        document.querySelectorAll('.faq-q').forEach(q => {
            q.addEventListener('click', () => { q.parentElement.classList.toggle('open'); });
        });

        // Init
        updatePage(window.location.pathname);
        updatePricingUI();

    </script>
</body>
</html>
